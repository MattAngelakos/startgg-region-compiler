<!DOCTYPE html>
<html>
<head>
  <title>H2H Win/Loss Chart</title>
  <style>
    table {
      border-collapse: collapse;
      width: auto;
    }
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    .gray {
      background-color: gray;
    }
    .yellow {
      background-color: yellow;
    }
    .lime-green {
      background-color: limegreen;
    }
    .green {
      background-color: green;
    }
    .light-red {
      background-color: lightpink;
    }
    .red {
      background-color: red;
    }
  </style>
</head>
<body>
  <table id="h2hTable"></table>
  <script>
    // Your data object
    const data = {
      Syrup: {
        id: 1216463,
        Tweek: { wins: 0, losses: 1 },
        Marvale: { wins: 6, losses: 0 }
      },
      Tweek: {
        id: 15768,
        Marvale: { wins: 0, losses: 0 },
        Syrup: { wins: 1, losses: 0 }
      },
      Marvale: {
        id: 1189720,
        Syrup: { wins: 0, losses: 6 },
        Tweek: { wins: 0, losses: 0 }
      }
    }

    // Get the players
    const players = Object.keys(data);

    // Create the table
    const table = document.getElementById('h2hTable');

    // Create the header row
    const headerRow = document.createElement('tr');
    const emptyHeader = document.createElement('th');
    headerRow.appendChild(emptyHeader);
    players.forEach(player => {
      const th = document.createElement('th');
      th.textContent = player;
      headerRow.appendChild(th);
    });
    table.appendChild(headerRow);

    // Create the rows for each player
    players.forEach(player => {
      const row = document.createElement('tr');
      
      // Create the header cell for the row
      const rowHeader = document.createElement('th');
      rowHeader.textContent = player;
      row.appendChild(rowHeader);
      
      // Create the cells for each opponent
      players.forEach(opponent => {
        const cell = document.createElement('td');
        if (player === opponent) {
          cell.textContent = '-';
        } else if (data[player][opponent]) {
          const wins = data[player][opponent].wins;
          const losses = data[player][opponent].losses;
          cell.textContent = `${wins} - ${losses}`;
          // Apply color coding
          if (wins === 0 && losses === 0) {
            cell.classList.add('gray');
          } else if (wins === losses) {
            cell.classList.add('yellow');
          } else if (wins > 0 && losses === 0) {
            cell.classList.add('green');
          } else if (wins > losses) {
            cell.classList.add('lime-green');
          } else if (losses > 0 && wins === 0) {
            cell.classList.add('red');
          } else if (losses > wins) {
            cell.classList.add('light-red');
          }
        } else {
          cell.textContent = '0 - 0';
          cell.classList.add('gray');
        }
        row.appendChild(cell);
      });

      table.appendChild(row);
    });
    const adjustColumnWidths = () => {
      const rows = table.rows;
      const columnWidths = [];
      for (let col = 0; col < rows[0].cells.length; col++) {
        let maxWidth = 0;
        for (let row = 0; row < rows.length; row++) {
          const cell = rows[row].cells[col];
          const cellWidth = getTextWidth(cell.textContent, window.getComputedStyle(cell).font);
          if (cellWidth > maxWidth) {
            maxWidth = cellWidth;
          }
        }
        columnWidths[col] = maxWidth;
      }
      for (let col = 0; col < columnWidths.length; col++) {
        for (let row = 0; row < rows.length; row++) {
          rows[row].cells[col].style.width = `${columnWidths[col]}px`;
        }
      }
    };
    const getTextWidth = (text, font) => {
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      context.font = font;
      return context.measureText(text).width;
    };
    adjustColumnWidths();
  </script>
</body>
</html>
